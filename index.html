<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nguyễn Du</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      .drum-container {
        border: none;
        height: 572px;
        border: none;
      }
      .nguyendu {
        display: flex;
        position: absolute !important;
        width: auto !important;
        height: 70% !important;
        bottom: -5px;
        justify-content: center;
        align-items: center;
        z-index: 10;
      }
      .avt {
        cursor: pointer;
      
      }
      .forum-button {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 60px;
  height: 60px;
  background-color: #ff9f00;
  color: white;
  border-radius: 50%;
  font-size: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-decoration: none;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  z-index: 1000;
  transition: transform 0.2s ease;
}
.forum-button:hover {
  transform: scale(1.1);
}

    </style>
</head>
<body>
  <a href="forum.html" class="forum-button">
  💬
</a>

  <nav class="navbar navbar-expand-lg bg-body-tertiary" style="background-color: #ff9f00;">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">
        <img src="img/snapedit_1745406959124.jpeg" class="avt" alt="">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active underline-animate" href="Tieusu.html">🕑Tiểu sử</a></li>
          <li class="nav-item"><a class="nav-link underline-animate" href="vinhdanhvacongnhan.html">🏛️ Vinh danh và công nhận</a></li>
          <li class="nav-item"><a class="nav-link underline-animate" href="giatridisanvavanhoa.html">🏺 Giá trị di sản và văn hóa</a></li>
          <li class="nav-item"><a class="nav-link underline-animate" href="congtacbaotonvaphathuy.html">🎬 Công tác bảo tồn và phát huy</a></li>
          <li class="nav-item"><a class="nav-link underline-animate" href="TruyenKieu.html">💭Truyện Kiều</a></li>
          <li class="nav-item">
            <a href="2005VDLA038 .pdf" download>
              <button class="logout-btn">Tải thông tin chi tiết tại đây</button>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px;">
      <div style="display: flex; align-items: center;">
        <img src="https://i.pravatar.cc/100" class="avt" id="userAvatar" alt="avatar">
        
        <h4 id="welcomeText" style="margin: 0;"></h4>
        <input type="file" id="avatarInput" accept="image/*" style="display:none">
      </div>
      <button class="logout-btn" onclick="logout()">Đăng xuất</button>
    </div>
  </nav>

  <div class="content">
    <div class="image-container">
      <div class="drum-container">
        <img class="chin rotate-cw" src="img/Vong 09.svg" alt="Vòng ngoài cùng">
        <img class="tam rotate-ccw" src="img/Vong 08.svg" alt="Vòng giữa">
        <img class="bay rotate-cw" src="img/Vong 07.svg" alt="Vòng trong cùng">
        <img class="sau rotate-ccw" src="img/Vong 06.svg" alt="Vòng trong nhất">
        <img class="nam rotate-cw" src="img/Vong 05.svg" alt="Vòng trong nhì">
        <img class="tu rotate-ccw" src="img/Vong 04.svg" alt="Vòng trong tam">
        <img class="ba rotate-cw" src="img/Vong 03.svg" alt="Vòng trong tứ">
        <img class="hai rotate-ccw" src="img/Vong 02.svg" alt="Vòng trong ngũ">
        <img class="mot rotate-cw" src="img/Vong 01.svg" alt="Vòng trong lục">
        <img class="nguyendu" src="img/anhnguyendu.png" alt="ảnh Nguyễn Du">
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAKR_Urt79aX0GqcN52CEwLCJi9bF_iD98",
      authDomain: "nguyendueducation-44987.firebaseapp.com",
      projectId: "nguyendueducation-44987",
      storageBucket: "nguyendueducation-44987.firebasestorage.app",
      messagingSenderId: "646604023441",
      appId: "1:646604023441:web:1a1c5bf0097d52b170c130",
      measurementId: "G-0F0C5MPPD4"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    const userAvatar = document.getElementById("userAvatar");
    const avatarInput = document.getElementById("avatarInput");

    if (!currentUser || !currentUser.email) {
      window.location.href = "login.html";
    } else {
      document.getElementById("welcomeText").innerText = `Xin chào, ${currentUser.email}`;
      if (currentUser.avatar) {
        userAvatar.src = currentUser.avatar;
      }
    }

    window.logout = function () {
      localStorage.removeItem("currentUser");
      signOut(auth).then(() => {
        window.location.href = "login.html";
      });
    };

    userAvatar.addEventListener("click", () => {
      if (confirm('Bạn có muốn đổi ảnh đại diện?')) avatarInput.click();
    });

    avatarInput.addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const imageUrl = e.target.result;
          userAvatar.src = imageUrl;
          const updatedUser = { ...currentUser, avatar: imageUrl };
          localStorage.setItem("currentUser", JSON.stringify(updatedUser));
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
      <script type="application/javascript">
        (function(w,d,s,o,f,js,fjs){w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments);};(js=d.createElement(s)),(fjs=d.getElementsByTagName(s)[0]);js.id=o;js.src=f;js.async=1;js.referrerPolicy = "origin";fjs.parentNode.insertBefore(js,fjs);})(window,document,"script","copilot","https://script.copilot.live/v1/copilot.min.js?tkn=cat-pdov4c0s");
        copilot("init",{});
        </script>
</body>
</html>
